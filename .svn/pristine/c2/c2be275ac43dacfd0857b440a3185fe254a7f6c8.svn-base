<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>投保询价</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <!-- <link rel="stylesheet" href="css/site.css"/> -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/sweet-alert.css" />
    <script src="js/sweet-alert.min.js"></script>
    <link rel="stylesheet" href="css/angularjs-datetime-picker.css"/>
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link href="css/bootstrap-datetimepicker.css" rel="stylesheet" />


</head>
<body ng-app="myApp" ng-controller="myController">
<!-- 报价系统，svn上传测试 -->
<div id="content">
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                <div class="widget-box">
                    <div class="widget-content tab-content">
                        <!--快速检索-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>快速检索</h5>
                            </div>
                            <div class="widget-content nopadding">
                                <form id="form-wizard" class="form-horizontal" method="post" name="quicklyQuery"
                                      action="personal-issue.html" novalidate="novalidate">

                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">车牌号：</label>

                                            <div class="controls">
                                                <input id="username" type="text" name="licenseNo"
                                                       ng-model="quick.licenseNo" maxlength="12" required placeholder="车牌号"
                                                        />
                                                <button type="button" class="btn btn-success" ng-click="query('lg')">搜 索
                                                </button>
                                            </div>
                                        </div>

                                        <!--  //创建一个局部视图，需要的时候引用它， 下面会用到-->
                                        <script type="text/ng-template" id="addDevice.html">
                                            <div class="modal-header">
                                                <h3 class="modal-title">新增设备</h3>
                                            </div>
                                            <div  class="modal-body">
                                                <form  class="form-horizontal" name="facilityForm">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                        <tr class="odd gradeX">
                                                            <th>设备名称</th>
                                                            <th>保额</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>

                                                        <!-- ngRepeat: one in facilityList -->
                                                        <tr class="odd gradeX text-right" ng-repeat="carDevice in carDeviceList">
                                                            <td class="controls">
                                                                <input ng-model="carDevice.deviceName" ui-valid="" type="text">
                                                            </td>
                                                            <td class="controls">
                                                                <input ng-model="carDevice.actualValue;" ext-replace-money="" ui-valid="float.amount1" type="number">
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td class="controls" colspan="2" style="text-align:left">
                                                                合计：<span class="cal-sum" ng-model="addDeviceValue" ng-bind="grandTotal(carDeviceList)" style="width: auto">0</span>

                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                    <div class="pt10 tac">
                                                        <button ng-click="add()" class="btn btn-primary">新&nbsp;&nbsp;增</button>
                                                        &nbsp;&nbsp;
                                                        <button ng-click="confirm()" class="btn btn-success">确&nbsp;&nbsp;定</button>
                                                        &nbsp;&nbsp;
                                                        <button ng-click="resert()" class="btn btn-info">重&nbsp;&nbsp;置</button>
                                                        &nbsp;&nbsp;
                                                        <button ng-click="cancel()" class="btn btn-warning">取&nbsp;&nbsp;消</button>
                                                    </div>
                                                </form>
                                            </div>

                                        </script>

                                        <!--新增设备-->
                                        <script type="text/ng-template" id="myModelContent.html">
                                            <!--  // modal头部 。body  footer 类推-->
                                            <div class="modal-header">
                                                <h3 class="modal-title">最新历史数据保单</h3>
                                            </div>
                                            <div class="modal-body" ng-show="items==''">
                                                <span>无历史保单信息</span>
                                                </div>
                                            <div class="modal-body" ng-show="!(items=='')" >
                                                <!--<ul>-->
                                                <!--<li ng-repeat="item in items">-->
                                                <!--<a ng-click="selected.item = item">{{item}}</a>-->

                                                <!--</li>-->
                                                <!--当前选择： <b>{{selected.item}}</b>-->
                                                <!--</ul>-->
                                                <table  class="table table-bordered">
                                                    <thead>
                                                    <tr class="odd gradeX">
                                                        <th>选择</th>
                                                        <th>保单号</th>
                                                        <th>车牌号</th>
                                                        <th>车架号</th>
                                                        <th>保险起期</th>
                                                        <th>保险止期</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="odd gradeX text-right">
                                                        <td  style="text-align: center;">
                                                            <input type="checkbox" ng-true-value="1"  ng-false-value="0" ng-true-value="1"
                                                               ng-model="itemIsSelected"    ng-init="selected = items;itemIsSelected=1" />
                                                        </td>
                                                        <td style="text-align: center;">{{items.policyNo}}</td>
                                                        <td style="text-align: center;">{{items.licenseNo}}</td>
                                                        <td style="text-align: center;">{{items.frameNo}}</td>
                                                        <td style="text-align: center;">{{items.startDate}}</td>
                                                        <td style="text-align: center;">{{items.endDate}}</td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-primary" ng-click="ok()" ng-show="!(items=='')&&itemIsSelected==1">
                                                    确认
                                                </button>
                                                <button class="btn btn-warning" ng-click="cancel()">退出</button>

                                            </div>
                                        </script>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--被保人信息-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>被保人信息</h5>
                            </div>
                            <div class="widget-content nopadding">
                                <form id="form-wizard" class="form-horizontal" method="post" name="insuredForm"
                                      action="personal-issue.html">
                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>客户类型：</label>

                                            <div class="controls">
                                                <label class="radio inline">
                                                    <input type="radio" name="optionsRadios" id="optionsRadios1"
                                                           value="1" ng-change="cusRadio(1)"
                                                           ng-model="mainInfo.insuredList[1].insuredType">
                                                    个人
                                                </label>
                                                <label class="radio inline">
                                                    <input type="radio" name="optionsRadios" id="optionsRadios2"
                                                           value="2" ng-change="cusRadio(2)"
                                                           ng-model="mainInfo.insuredList[1].insuredType">
                                                    团体
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>名称：</label>
                                            <div class="controls">
                                                <input type="text" name="insuredName"
                                                       ng-model="mainInfo.insuredList[1].insuredName" required />
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>证件：</label>
                                            <div class="controls">
                                                <select ng-model="mainInfo.insuredList[1].identifyType" ng-options="cert.Id as cert.name for cert in personCert"
                                                        ng-init="mainInfo.insuredList[1].identifyType=personCert[0].Id" >
                                                    <!--<option ng-options="cert in personCert" value="{{cert.id}}">{{cert.name}}</option>-->
                                                </select>
                                                <input id="idCard" ng-model="mainInfo.insuredList[1].identifyNumber"
                                                       type="text" name="idCard" maxlength="18" placeholder="证件号"  required/>
                                                <!-- <button type="button" ng-click="insuredQuery()" class="btn btn-success">客户信息检索
                                                </button>
                                                <button type="button" class="btn btn-success disabled">修 改</button> -->
                                            </div>
                                        </div>
                                        <!--<div class="control-group control-group-inline">-->
                                        <!--<label class="control-label"><span-->
                                        <!--class="require-tips">*</span>出生日期：</label>-->

                                        <!--<div class="controls">-->
                                        <!--<div class="input-append date">-->

                                        <!--<input name="birthDay" ng-model="mainInfo.insuredList[1].birthDay" class="w180"-->
                                        <!--datetime-picker date-format="yyyy-MM-dd" size="16"-->
                                        <!--date-only/>-->
                                        <!--<span style="color:red" ng-show="quicklyQuery.birthDay.$dirty && quicklyQuery.birthDay.$invalid">-->
                                        <!--<span ng-show="quicklyQuery.birthDay.$error.required">出生日期不允许为空。</span>-->
                                        <!--</span>      -->
                                        <!--</div>-->
                                        <!--</div>-->
                                        <!--</div>-->
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>性别：</label>

                                            <div class="controls">
                                                <label class="radio inline">
                                                    <input type="radio" name="sexRadios" id="optionsRadios1"
                                                           value="1" checked ng-model="mainInfo.insuredList[1].sex">
                                                    男
                                                </label>
                                                <label class="radio inline">
                                                    <input type="radio" name="sexRadios" id="optionsRadios2"
                                                           value="2" ng-model="mainInfo.insuredList[1].sex">
                                                    女
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--行驶证车主-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>行驶证车主</h5>
                                <label class="checkbox inline"><span class="require-tips">*</span>同被保险人</label>
                                <label for="newCarFlag" class="checkbox inline">
                                    <input type="checkbox" id="newCarFlag"
                                           ng-model="toInsured" ng-true-value="1"
                                           ng-false-value="0" ng-click="isSample(toInsured)">
                                </label>
                            </div>
                            <div class="widget-content nopadding">
                                <form id="form-wizard" class="form-horizontal" method="post" name="ownerForm"
                                      action="personal-issue.html">
                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>被保险人与车辆的关系：</label>

                                            <div class="controls">
                                                <select ng-model="mainInfo.carInfo.carInsureRelation" ng-change="change(mainInfo.carInfo.carInsureRelation)">
                                                    <option value="1">所有</option>
                                                    <option value="2">使用</option>
                                                    <option value="3">管理</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>名称：</label>

                                            <div class="controls">
                                                <input id="username" ng-model="mainInfo.insuredList[0].insuredName"
                                                       type="text" name="username" placeholder="名称" required/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>车主性质代码：</label>

                                            <div class="controls">
                                                <select ng-model="mainInfo.insuredList[0].insuredType" required>
                                                    <option value="7">个人</option>
                                                    <option value="8">企业</option>
                                                    <option value="10">机关</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>证件：</label>

                                            <div class="controls">
                                                <select ng-model="mainInfo.insuredList[0].identifyType">
                                                    <option value="01" checked>身份证</option>
                                                    <option value="02" checked>护照</option>
                                                    <option value="03" checked>军人证</option>
                                                    <option value="04" checked>港澳通行证</option>
                                                    <option value="05" checked>驾驶证</option>
                                                    <option value="06" checked>港澳回乡证或台胞证</option>
                                                    <option value="07" checked>临时身份证</option>
                                                    <option value="99" checked>其他</option>
                                                </select>
                                                <input id="idCard" type="text" name="idCard" placeholder="证件号"
                                                       ng-model="mainInfo.insuredList[0].identifyNumber" required/>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--保险期限-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>保险期限</h5>
                            </div>
                            <div class="widget-content nopadding">
                                <form id="insuranceDeadline" name="insuranceDeadline" class="form-horizontal" method="post"
                                      action="personal-issue.html">
                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>交强险保险期限：</label>

                                            <div class="controls">


                                                <div class="input-append date">
                                                    <!-- <input ng-model="mainInfo.main.bzStartDate" class="datetimepicker"
                                                           datetime-picker date-format="yyyy-MM-dd" size="16"
                                                           date-only required/>  -->
                                                    <input class="w180" size="16" id="bzStartDate" name="bzStartDate" type="text" class="datetimepicker" orz
                                                           ng-model="mainInfo.main.bzStartDate" required />
                                                    <span class="add-on"><i class="icon-calendar"></i></span>
                                                </div>

                                                <label class="help-inline"  > - </label>

                                                <div class="input-append date" data-date="2016-07-22"
                                                     data-date-format="yyyy-mm-dd">

                                                    <!-- <input ng-model="mainInfo.main.bzEndDate" class="datetimepicker"
                                                           datetime-picker date-format="yyyy-MM-dd" size="16"
                                                           date-only required/> -->
                                                    <input class="w180" size="16" id="bzEndDate" name="bzEndDate" type="text" class="datetimepicker" orz
                                                           ng-model="mainInfo.main.bzEndDate" required />
                                                    <span class="add-on"><i class="icon-calendar"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>商业险保险期限：</label>

                                            <div class="controls">
                                                <div class="input-append date" data-date="2016-07-22"
                                                     data-date-format="yyyy-mm-dd">

                                                    <!-- <input ng-model="mainInfo.main.startDate" name="startDate" class="datetimepicker"
                                                           datetime-picker date-format="yyyy-MM-dd" size="16"
                                                           date-only required/> -->
                                                    <input class="w180" size="16" id="startDate" name="startDate" type="text" class="datetimepicker" orz
                                                           ng-model="mainInfo.main.startDate" required />
                                                    <span class="add-on"><i class="icon-calendar"></i></span>
                                                </div>
                                                <label class="help-inline"> - </label>

                                                <div class="input-append date" data-date="2016-07-22"
                                                     data-date-format="yyyy-mm-dd">

                                                    <!-- <input ng-model="mainInfo.main.endDate" class="datetimepicker"
                                                           datetime-picker date-format="yyyy-MM-dd" size="16"
                                                           date-only required/> -->
                                                    <input class="w180" size="16" id="endDate" name="endDate" type="text" class="datetimepicker" orz
                                                           ng-model="mainInfo.main.endDate" required />
                                                    <span class="add-on"><i class="icon-calendar"></i></span>
                                                </div>


                                            </div>
                                        </div>
                                        <!--<div class="control-group">-->
                                        <!--<label class="control-label" style="width:200px;">跨省首年投保未出险证明年数：</label>-->
                                        <!---->
                                        <!--<div class="controls">-->
                                        <!--<label class="help-inline">交强险</label>-->
                                        <!--<input class="w120" id="password" type="text" name="password"-->
                                        <!--ng-model="mainInfo.carInfo.noDamageYears"/>-->
                                        <!--</div>-->
                                        <!--</div>-->

                                        <!-- <div class="control-group control-group-inline">
                                            <label class="control-label"  >是否投贷多年:</label>
                                            <div class="controls">
                                                <label for="creditFlag" class="checkbox inline">
                                                    <input type="checkbox" id="creditFlag"
                                                           ng-model="mainInfo.carInfo.creditFlag" ng-true-value="1"
                                                           ng-false-value="0"
                                                            >
                                                </label>
                                            </div>
                                        </div> -->
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--车辆信息-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>车辆信息</h5>
                            </div>
                            <div class="widget-content nopadding">
                                <form id="carForm" class="form-horizontal" method="post" name="carForm" novalidate="novalidate">
                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>行驶证车辆类型：</label>

                                            <div class="controls">
                                                <select ng-model="mainInfo.carInfo.carType"
                                                        ng-init="mainInfo.carInfo.carType='K33'">
                                                    <option>--请选择--</option>

                                                    <option value="K11">大型普通客车</option>
                                                    <option value="K12">大型双层客车</option>
                                                    <option value="K13">大型卧铺客车</option>
                                                    <option value="K14">大型铰接客车</option>
                                                    <option value="K15">大型越野客车</option>
                                                    <option value="K21">中型普通客车</option>
                                                    <option value="K22">中型双层客车</option>
                                                    <option value="K23">中型卧铺客车</option>
                                                    <option value="K24">中型铰接客车</option>
                                                    <option value="K25">中型越野客车</option>
                                                    <option value="K31">小型普通客车</option>
                                                    <option value="K32">小型越野客车</option>
                                                    <option value="K33">轿车</option>

                                                </select>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>车辆种类：</label>

                                            <div class="controls">

                                                <select class="w80" name="carKindCode" ng-model="mainInfo.carInfo.carKindCode"
                                                        id="CarKindCode" ng-init="mainInfo.carInfo.carKindCode='A0'">
                                                    <option value="?" selected="selected" title=""></option>
                                                    <option value="A0">客车</option>

                                                </select>
                                                <!--<input id="password" type="text" class="w120" name="password"/>-->
                                                <!--<select title="" class="w340">-->
                                                <!--<option value="?" selected="selected" title=""></option>-->
                                                <!--</select>-->
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>使用性质：</label>

                                            <div class="controls">
                                                <select class="w160" name="useNatureCode" ng-model="mainInfo.carInfo.useNatureCode"
                                                        ng-init="mainInfo.carInfo.useNatureCode='8A'">
                                                    <option value="">--请选择--</option>
                                                    <option value="8A">家庭自用</option>
                                                    <option value="8B">非营业企业</option>
                                                    <option value="8C">非营业党政机关，事业团体</option>
                                                    <option value="8D">非营业个人</option>
                                                    <option value="9A">营业出租租赁</option>
                                                    <option value="9B">营业城市公交</option>
                                                    <option value="9C">营业公路客运</option>
                                                    <option value="9D">营业货运</option>
                                                </select>
                                            </div>
                                        </div>

                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>初次登记日期：</label>

                                            <div class="controls">
                                                <div class="input-append date">

                                                    <!-- <input ng-model="mainInfo.carInfo.enrollDate" name="enrollDate" class="w180"
                                                           datetime-picker date-format="yyyy-MM-dd" size="16"
                                                           date-only/> -->
                                                    <input class="w180" size="16" id="enrollDate" name="enrollDate" type="text" class="datetimepicker" orz
                                                           ng-model="mainInfo.carInfo.enrollDate" required />
                                                    <span class="add-on"><i class="icon-calendar"></i></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>厂牌型号：</label>

                                            <div class="controls">
                                                <input id="carModel" type="text"  name="carModel"
                                                       ng-model="mainInfo.carInfo.brandName" required/>
                                                <button type="button" ng-click="getVehicleModelQuery()"
                                                        class="btn btn-success">车型查询
                                                </button>
                                                <select class="w642" ng-model="carInfo"  ng-change="change(carInfo)"
                                                        ng-options="x.platModelName+' '+x.marketDate+' ' +x.purchasePrice for x in carInfoList"></select>
                                            </div>


                                        </div>

                                        <div class="control-group control-group-inline">
                                            <label class="control-label">本地车型代码：</label>
                                            <div class="controls">
                                                <input id="password" type="text" name="rBCode" disabled="disabled"
                                                       ng-model="carInfo.rBCode"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">平台车型代码：</label>
                                            <div class="controls">
                                                <input id="password" type="text" name="platModelCode" disabled="disabled"
                                                       ng-model="carInfo.platModelCode"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">平台车型名称：</label>
                                            <div class="controls">
                                                <input id="password" type="text" name="platModelName" disabled="disabled"
                                                       ng-model="carInfo.platModelName"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>车牌号：</label>

                                            <div class="controls">
                                                <input id="licenseNo" type="text" name="licenseNo" placeholder="车牌号"
                                                       ng-model="mainInfo.carInfo.licenseNo"/>
                                                <label for="option1" class="checkbox">
                                                    <input id="newCarFlag" ng-model="mainInfo.carInfo.newCarFlag"   type="checkbox" value="option1"
                                                           ng-true-value="1" ng-false-value="0">新车
                                                </label>

                                            </div>

                                        </div>



                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>发动机号：</label>

                                            <div class="controls">
                                                <input id="password" type="text" name="engineNo" placeholder="发动机号"
                                                       ng-model="mainInfo.carInfo.engineNo"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span class="require-tips">*</span>车架号：</label>

                                            <div class="controls">
                                                <input id="frameNo" type="text" name="password" placeholder="车架号"
                                                       ng-model="mainInfo.carInfo.frameNo" maxlength="17"/>
                                            </div>
                                        </div>

                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>新车购置价：</label>

                                            <div class="controls">
                                                <input id="password" type="text" name="purchasePrice" placeholder="新车购置价"
                                                       ng-model="carInfo.purchasePrice"/>
                                            </div>
                                        </div>

                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>车辆实际价值：</label>

                                            <div class="controls">
                                                <input id="actualValue" type="text" name="actualValue" placeholder="车辆实际价值"
                                                       ng-model="carInfo.actualValue"/>
                                            </div>

                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"><span
                                                    class="require-tips">*</span>市场公允价值：</label>

                                            <div class="controls">
                                                <input id="fairMarketValue" type="text" name="fairMarketValue" placeholder="市场公允价值"
                                                       ng-model="mainInfo.carInfo.fairMarketValue"/>
                                                <label for="option1" class="checkbox">
                                                    <input id="newCarFlag" ng-model="mainInfo.carInfo.carPriceType"   type="checkbox" value="option1"
                                                           ng-true-value="2" ng-false-value="1" ng-init="mainInfo.carInfo.carPriceType=1" ng-click="changeAmount()">使用公允价值投保
                                                </label>
                                            </div>
                                        </div>

                                    </div>

                                    <div class="control-group" ng-hide="true"></div>

                                    <div class="control-group control-group-inline">
                                        <label class="control-label"><span
                                                class="require-tips">*</span>号牌种类：</label>

                                        <div class="controls">
                                            <select ng-model="mainInfo.carInfo.licenseType"
                                                    ng-init="mainInfo.carInfo.licenseType='02'">
                                                <option>--请选择--</option>
                                                <option value="01">大型汽车号牌</option>
                                                <option value="02">小型汽车号牌</option>
                                                <option value="03">使馆汽车号牌</option>
                                                <option value="04">领馆汽车号牌</option>
                                                <option value="05">境外汽车号牌</option>
                                                <option value="06">外籍汽车号牌</option>
                                                <option value="07">两、三轮摩托车号牌</option>
                                                <option value="08">轻便摩托车号牌</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="control-group control-group-inline">
                                        <label class="control-label"><span
                                                class="require-tips">*</span>能量类型：</label>

                                        <div class="controls">
                                            <select class="w160" ng-model="mainInfo.carInfo.fuleType"
                                                    ng-init="mainInfo.carInfo.fuleType='0'">
                                                <option value="0">燃油</option>
                                                <option value="1">纯电动</option>
                                                <option value="2">燃气电池</option>
                                                <option value="3">插电式混合动力</option>
                                                <option value="4">其他混合动力</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="control-group control-group-inline">
                                        <label class="control-label"><span
                                                class="require-tips">*</span>核定座位数：</label>

                                        <div class="controls">
                                            <!-- <label class="help-inline">/</label> -->
                                            <input id="password" type="text" name="password" class="w70"
                                                   ng-model="carInfo.seatCount"/>
                                        </div>
                                    </div>
                                    <div class="control-group control-group-inline">
                                        <label class="control-label"><span
                                                class="require-tips">*</span>核定载重量(吨)：</label>

                                        <div class="controls">
                                            <!-- <label class="help-inline">/</label> -->
                                            <input id="password" type="text" name="vehicleTonnage"
                                                   ng-model="carInfo.vehicleTonnage"/>
                                        </div>
                                    </div>
                                    <div class="control-group control-group-inline">
                                        <label class="control-label">整备质量(吨)：</label>

                                        <div class="controls">
                                            <input id="password" type="text" name="vehicleWeight" class="w70"
                                                   ng-model="carInfo.vehicleWeight"/>
                                        </div>
                                    </div>
                                    <div class="control-group control-group-inline">
                                        <label class="control-label">功率(KW)：</label>

                                        <div class="controls">
                                            <input id="password" type="text" name="" class="w70"/>
                                        </div>
                                    </div>
                                    <div class="control-group control-group-inline">
                                        <label class="control-label"><span
                                                class="require-tips">*</span>排气量(升)：</label>

                                        <div class="controls">
                                            <!-- <label class="help-inline">/</label> -->
                                            <input id="password" type="text" name="exhaustCapacity" class="w70"
                                                   ng-model="carInfo.exhaustCapacity"/>
                                        </div>
                                    </div>

                                    <div class="control-group control-group-inline">
                                        <label class="control-label">特殊车投保标志：</label>

                                        <div class="controls">
                                            <select ng-model="mainInfo.carInfo.specialCarFlag"
                                                    ng-init="mainInfo.carInfo.specialCarFlag='0'">
                                                <option value="0">空</option>
                                            </select>
                                        </div>
                                    </div>

                                </form>
                            </div>

                        </div>
                        <!--选择保障-->
                        <div class="widget-box">
                            <div class="widget-title"><span class="icon"> <i class="icon-list"></i> </span>
                                <h5>选择保障</h5>
                                <!-- <label class="checkbox inline"><span class="require-tips">*</span>是否按照公允价值投保</label>
                                <label  class="checkbox inline">
                                    <input type="checkbox"
                                           ng-model="mainInfo.carInfo.carPriceType" ng-true-value="2"
                                           ng-false-value="1"
                                            >
                                </label> -->
                            </div>
                            <div class="widget-content">
                                <form id="form-wizard" name="checkProtection" class="form-horizontal" method="post"
                                      action="personal-issue.html">


                                    <div id="form-wizard-1" class="step">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label"></label>

                                            <div class="controls">
                                                <label for="option1" class="checkbox">
                                                    <input id="isCompulsoryInsurance" name="isCompulsoryInsurance" type="checkbox" value="option1"  ng-model="jqx"
                                                           ng-true-value="1" ng-false-value="0" ng-init="jqx=0">交强险
                                                </label>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">保费(元):</label>

                                            <div class="controls">
                                                <input id="username" type="text" name="username"
                                                       ng-model="combosJQX.sumAmount"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">税款合计（元）:</label>

                                            <div class="controls">
                                                <input id="username" type="text" name="username" ng-model="combosJQX.sumPremium" disabled="true"/>
                                            </div>
                                        </div>
                                        <div id="compulsoryInsuranceInfo" class="control-group hide">
                                            <div class="section">
                                                <div class="h30" style="margin-top:-35px;">
                                                    <div class="fr w180">
		                               <!--<span id="ctrl_isShowForceFactor"><span class="toggle plus"><i class="upright"></i><i-->
                                               <!--class="crossband"></i></span>-->
		                                  <!--<label>-->
                                              <!--<span>交强险费率系数及险别</span>-->
                                          <!--</label>-->
		                               <!--</span>-->
                                                    </div>
                                                </div>
                                                <div id="addInsuranceTypeInfo" class="panel-heading hide">
                                                    <div class="h30 bdb_d_888 mb10 mt5">
                                                        <div class="f12 fl fwb p5">交强险险别</div>
                                                    </div>
                                                    <div class="form-horizontal">
                                                        <div class="control-group control-group-inline">
                                                            <label class="control-label">基准保费(元):</label>

                                                            <div class="controls">
                                                                <input type="text"
                                                                       ng-model="mainInfo.main.bzBenchmarkPremium"
                                                                       class="warn ng-pristine ng-valid" disabled="true">
                                                            </div>
                                                        </div>

                                                        <div class="control-group control-group-inline">
                                                            <label class="control-label">合计折扣:</label>

                                                            <div class="controls">
                                                                <input type="text" ng-model="mainInfo.main.bzDiscount"
                                                                       class="warn ng-pristine ng-valid" disabled="true">
                                                            </div>
                                                        </div>
                                                        <!--<div class="form-horizontal">-->
                                                            <!--<table class="table table-bordered">-->
                                                                <!--<thead>-->
                                                                <!--<tr class="odd gradeX">-->
                                                                    <!--<th>险别</th>-->
                                                                    <!--<th>赔偿限额(元)</th>-->
                                                                    <!--<th>(无过错)赔偿限额(元)</th>-->
                                                                <!--</tr>-->
                                                                <!--</thead>-->
                                                                <!--<tbody>-->
                                                                <!--<tr>-->
                                                                    <!--<td style="text-align:center">死亡伤残</td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                <!--</tr>-->
                                                                <!--<tr>-->
                                                                    <!--<td style="text-align:center">医疗费用</td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                <!--</tr>-->
                                                                <!--<tr>-->
                                                                    <!--<td style="text-align:center">财产损失</td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                    <!--<td style="text-align:center"><input type="text"-->
                                                                                                         <!--disabled/></td>-->
                                                                <!--</tr>-->
                                                                <!--</tbody>-->
                                                            <!--</table>-->
                                                        <!--</div>-->
                                                    </div>
                                                </div>
                                                <div id="compulsoryInsuranceType" class="panel-heading">
                                                    <div class="h30 bdb_d_888 mb10 mt5">
                                                        <div class="f12 fl fwb p5">车船税信息</div>
                                                        <div class="fr w120 p5">
						                                  <span id="ctrl_isShowTaxInfo"><span class="toggle plus"><i class="upright"></i><i
                                                                  class="crossband"></i></span>
						                                  <label>
                                                              <span>车船税详细信息</span>
                                                          </label>
						                                  </span>
                                                        </div>
                                                    </div>
                                                    <div class="form-horizontal">
                                                        <!-- 纳税类型-->
                                                        <div class="control-group  control-group-inline" id="taxTypeTitle">
                                                            <label class="control-label">纳税类型：</label>

                                                            <div class="controls" id="taxType">
                                                                <label class="radio inline">
                                                                    <input type="radio" name="optionsRadios"
                                                                           id="optionsRadios1" value="3M" checked
                                                                           ng-model="carShipTaxInfo.taxFlag">
                                                                    免税
                                                                </label>
                                                                <label class="radio inline">
                                                                    <input type="radio" name="optionsRadios"
                                                                           id="optionsRadios2" value="1N"
                                                                           ng-model="carShipTaxInfo.taxFlag" ng-init="carShipTaxInfo.taxFlag='1N'">
                                                                    缴税
                                                                </label>
                                                                <label class="radio inline">
                                                                    <input type="radio" name="optionsRadios"
                                                                           id="optionsRadios1" value="2W"
                                                                           ng-model="carShipTaxInfo.taxFlag">
                                                                    已完税
                                                                </label>
                                                                <label class="radio inline">
                                                                    <input type="radio" name="optionsRadios"
                                                                           id="optionsRadios2" value="4J"
                                                                           ng-model="carShipTaxInfo.taxFlag">
                                                                    减税
                                                                </label>

                                                            </div>
                                                        </div>
                                                        <div class="control-group control-group-inline">
                                                            <label class="control-label">纳税人名称：</label>

                                                            <div class="controls" id="taxType">
                                                                <input id="username" type="text" name="username"  ng-model="mainInfo.carShipTaxInfo.taxPayerName"
                                                                       ng-value="mainInfo.insuredList[1].insuredName" required
                                                                        />
                                                            </div>
                                                        </div>

                                                        <div class="control-group control-group-inline">
                                                            <label class="control-label">纳税人识别号：</label>

                                                            <div class="controls" id="taxType">
                                                                <input id="username" type="text" name="username" ng-model="mainInfo.carShipTaxInfo.taxPayerCertiCode"
                                                                       ng-value="mainInfo.insuredList[1].identifyNumber"
                                                                        />
                                                            </div>
                                                        </div>

                                                        <!--
                                                        <div class="fr w120 p5 ng-hide" ng-show="ctrl.isLastYearVehicleTaxShow">
                                                            <button class="btn btn-mini btn-primary" ng-click="quoteEvent.getLastYearVehicleTex()">上年缴税情况</button>
                                                        </div>
                                                        -->

                                                        <div id="addTaxItemInfo" class="hide">
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label"><span
                                                                        class="require-tips">*</span>减免税原因：</label>

                                                                <div class="controls">
                                                                    <select ng-model="mainInfo.carShipTaxInfo.relifReason"
                                                                            ng-init="mainInfo.carShipTaxInfo.relifReason='M7'">
                                                                        <option>--请选择--</option>
                                                                        <option value="M1">具备减免税证明</option>
                                                                        <option value="M2">拖拉机</option>
                                                                        <option value="M3">军队、武警专用车</option>
                                                                        <option value="M4">警车</option>
                                                                        <option value="M5">外国使领馆、国际组织及其人员</option>
                                                                        <option value="M7">新能源汽车</option>
                                                                        <option value="M9">其他</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label"
                                                                       style="width:200px;">完税凭证号（减免税证明号）：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.freeNo">
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">开具税务机关：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.taxComName">
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">开具税务机关名称：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.taxDue">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div id="addTaxInfo" class="hide">
                                                            <!--<div class="control-group control-group-inline">-->
                                                            <!--<label class="control-label">年单位税额：</label>-->
                                                            <!---->
                                                            <!--<div class="controls">-->
                                                            <!--<input type="text" class="w160"-->
                                                            <!--ng-model="mainInfo.carShipTaxInfo.taxDue">-->
                                                            <!--</div>-->
                                                            <!--</div>		                                                -->
                                                            <!--<div class="control-group control-group-inline">-->
                                                            <!--<label class="control-label">应缴税月份数：</label>-->
                                                            <!---->
                                                            <!--<div class="controls">-->
                                                            <!--<input type="text" class="w160">-->
                                                            <!--</div>-->
                                                            <!--</div>-->
                                                            <!--<div class="control-group control-group-inline">-->
                                                            <!--<label class="control-label">计税单位：</label>-->
                                                            <!---->
                                                            <!--<div class="controls">-->
                                                            <!--<input type="text" class="w160"-->
                                                            <!--ng-model="mainInfo.carShipTaxInfo.taxUnit">-->
                                                            <!--</div>-->
                                                            <!--</div>-->
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">当年应缴（元）：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.taxActual">
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">往年补缴（元）：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.previousPay">
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">滞纳金（元）：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160"
                                                                           ng-model="mainInfo.carShipTaxInfo.lateFee">
                                                                </div>
                                                            </div>
                                                            <div class="control-group control-group-inline">
                                                                <label class="control-label">合计（元）：</label>

                                                                <div class="controls">
                                                                    <input type="text" class="w160" disabled="true"
                                                                           ng-model="mainInfo.carShipTaxInfo.sumPayTax">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="control-group">
                                        <div class="controls">
                                            <label for="option1" class="checkbox">
                                                <input id="isCommercialInsurance" ng-model="syx" ng-init="syx=0" type="checkbox" value="option1">商业险
                                            </label>
                                            <!--
                                            <select><option>--请选择--</option><option>基本型</option><option>保障型</option><option>全面型</option>
                                            <option>本田标配</option></select>
                                            <label class="help-inline"> 当前选择套餐为：<span class="text-info">本田标配</span></label>
                                            <span class="fwb help-block" style="color:red;">温馨提示：套餐推荐险别，为当前根据信息推荐。如录单信息发生变化，可能引起推荐险别套餐的变化，请重新选择推荐套餐</span>
                                            -->
                                        </div>
                                    </div>
                                    <!--
                                    <div class="control-group" style="margin-top:-15px;">
                                      <div class="controls">
                                        <button type="button" class="btn btn-success">套餐设置</button>
                                        <button type="button" class="btn btn-success">另存为新套餐</button>
                                        <button type="button" class="btn btn-success">覆盖本套餐</button>
                                        <button type="button" class="btn btn-success">删除本套餐</button>
                                        <button type="button" class="btn btn-success">重置</button>
                                      </div>
                                    </div>
                                    -->
                                    <div id="commercialInsuranceInfo" class="control-group hide">
                                        <div class="section">

                                            <div class="h30" style="margin-top:-35px;">
                                                <div class="fr w120" ng-show="true">
		                               <span id="ctrl_isSYShowForceFactor"><span class="toggle plus" ng-class="extStates"><i
                                               class="upright"></i><i class="crossband"></i></span>
		                                  <label>
                                              <span>商业险费率因子</span>
                                          </label>
		                               </span>
                                                </div>
                                            </div>

                                            <div id="addSYRateInfo" class="panel-heading hide">
                                                <div class="h30 bdb_d_888 mb10 mt5">
                                                    <div class="f12 fl fwb p5 mb5">商业险费率因子</div>
                                                </div>
                                                <div class="form-horizontal">
                                                    <table class="table table-bordered">
                                                        <thead>
                                                        <tr class="odd gradeX">
                                                            <th>因子</th>
                                                            <th>档次</th>
                                                            <th>数值</th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr>
                                                            <td style="text-align:center">自主核保系数</td>
                                                            <td style="text-align:center"><input type="text"  disabled/>
                                                            </td>
                                                            <td style="text-align:center"><input type="text"  ng-model="combosData.ratioInfo.actuarialAutonomyRatio" disabled/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align:center">车损险绝对免赔额系数</td>
                                                            <td style="text-align:center"><input type="text" disabled/>
                                                            </td>
                                                            <td style="text-align:center"><input type="text" disabled/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align:center">渠道系数</td>
                                                            <td style="text-align:center"><input type="text" disabled/>
                                                            </td>
                                                            <td style="text-align:center"><input type="text"  ng-model="combosData.ratioInfo.actuarialChannelRatio" disabled/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align:center">无赔款优待系数</td>
                                                            <td style="text-align:center"><input type="text" disabled/>
                                                            </td>
                                                            <td style="text-align:center"><input type="text" ng-model="combosData.ratioInfo.claimAdjustValue" disabled/>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td style="text-align:center">交通违法系数</td>
                                                            <td style="text-align:center"><input type="text" disabled/>
                                                            </td>
                                                            <td style="text-align:center"><input type="text"  ng-model="combosData.ratioInfo.peccancyAdjustValue" disabled/>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="h30 bdb_d_888 mb10 mt5">
                                                <div class="f12 fl fwb p5 mb5">商业险险别


                                                </div>
                                                <!--
                                                <div class="fr w160 p5">
                                                    <span><span class="toggle plus" ng-class="extStates"><i class="upright"></i><i class="crossband"></i></span>
                                                      <label>
                                                          <span>显示费率/基准保费</span>
                                                      </label>
                                                    </span>
                                                </div>
                                                -->
                                            </div>
                                            <div class="form-horizontal">
                                                <table id="tabInsSYType" class="table table-bordered">
                                                    <thead>
                                                    <tr class="odd gradeX">
                                                        <th>选择</th>
                                                        <th style="width: 250px;">险别</th>
                                                        <th>保险金额/赔偿限额</th>
                                                        <th>不计免赔</th>
                                                        <!-- <th>费率浮动系数</th>
                                                        <th>纯风险费率</th> -->
                                                        <th>基准保费</th>
                                                        <th>折扣系数</th>
                                                        <th>保费</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="odd gradeX text-right">

                                                        <td><input type="checkbox" ng-true-value="1" ng-false-value="0"
                                                                   ng-model="kind[0]" ng-click="setDeductable(0)"
                                                                />
                                                        </td>
                                                        <!--<td ng-hide="true"ng-bind="temp[0].itemKindList[0].KindCode" />-->
                                                        <td class="text-center">机动车损失保险</td>
                                                        <td>
                                                            <table class="table">
                                                                <tbody>
                                                                <tr>
                                                                    <td>参考实际价值</td>
                                                                    <td><input type="text" value=""
                                                                               ng-model="temp[0].itemKindList[0].amount"
                                                                               ng-value="carInfo.actualValue" required>
                                                                    </td>
                                                                </tr>
                                                                <!-- <tr>
                                                                    <td>协商实际价值</td>
                                                                    <td><input type="text" value=""
                                                                               ng-model="temp[0].itemKindList[0].amount1">
                                                                    </td>
                                                                </tr> -->
                                                                <tr>
                                                                    <td>车损险绝对免赔额</td>
                                                                    <td><select
                                                                            ng-model="temp[0].itemKindList[0].m1Value">
                                                                        <option value="0">0</option>
                                                                        <option value="300">300</option>
                                                                        <option value="500">500</option>
                                                                        <option value="1000">1000</option>
                                                                        <option value="2000">2000</option>
                                                                    </select></td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </td>
                                                        <td class="text-center"><input type="checkbox"  ng-disabled="!kind[0]"
                                                                                       ng-model="temp[0].itemKindList[0].deductableFlag"
                                                                                       ng-true-value="1"
                                                                                       ng-false-value="0" disabled="disabled"
                                                                />
                                                        </td>

                                                        <!-- <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[0].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[0].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[0].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[0].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class="even gradeC">
                                                        <td><input type="checkbox" value="002" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[1]" ng-click="setDeductable(1)"
                                                                />
                                                        </td>
                                                        <td>机动车第三者责任保险</td>
                                                        <td>赔偿限额(万)<select
                                                                ng-model="temp[0].itemKindList[1].amount" ng-init="temp[0].itemKindList[1].amount='50000'">
                                                            <option value="50000">5</option>
                                                            <option value="100000">10</option>
                                                            <option value="150000">15</option>
                                                            <option value="200000">20</option>
                                                            <option value="300000">30</option>
                                                            <option value="500000">50</option>
                                                            <option value="1000000">100</option>
                                                            <option value="1000000+">100+</option>
                                                            <!--<option>5</option>-->
                                                        </select></td>
                                                        <td class="center"><input type="checkbox"  ng-disabled="!kind[1]"
                                                                                  ng-model="temp[0].itemKindList[1].deductableFlag"
                                                                                  ng-true-value="1" ng-false-value="0" />
                                                        </td>
                                                        <!-- <td class="center"><input type="text"
                                                                                  ng-model="temp[0].itemKindList[1].rateFactor"
                                                                                  class="w70"/></td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[1].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[1].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70"  ng-model="temp[0].itemKindList[1].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class="odd gradeA">
                                                        <td><input type="checkbox" value="007" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[2]" ng-click="setDeductable(2)"

                                                                />
                                                        </td>
                                                        <td class="text-center">机动车全车盗抢保险</td>
                                                        <td><label class="help-inline"> / </label><input type="text"
                                                                                                         ng-model="temp[0].itemKindList[2].amount" ng-value="carInfo.actualValue">
                                                        </td>
                                                        <td class="center"><input type="checkbox"   ng-disabled="!kind[2]"
                                                                                  ng-model="temp[0].itemKindList[2].deductableFlag"
                                                                                  ng-true-value="1" ng-false-value="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[2].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[2].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[2].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[2].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class="even gradeA">
                                                        <td><input type="checkbox" value="003" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[3]" ng-click="setDeductable(3)"

                                                                />
                                                        </td>
                                                        <td>机动车车上人员责任保险（司机）</td>
                                                        <td>
                                                            <select ng-model="temp[0].itemKindList[3].amount" ng-init="temp[0].itemKindList[3].amount='10000'">
                                                                <option value="10000">1万</option>
                                                                <option value="20000">2万</option>
                                                                <option value="50000">5万</option>
                                                                <option value="100000">10万</option>
                                                                <option value="200000">20万</option>
                                                                <option value="250000">25万</option>
                                                                <option value="300000">30万</option>
                                                            </select>
                                                            元
                                                        </td>
                                                        <td class="center"><input type="checkbox"   ng-disabled="!kind[3]"
                                                                                  ng-model="temp[0].itemKindList[3].deductableFlag"
                                                                                  ng-true-value="1" ng-false-value="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[3].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[3].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[3].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70"  ng-model="temp[0].itemKindList[3].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class="even gradeA">
                                                        <td><input type="checkbox" value="006" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[4]" ng-click="setDeductable(4)"

                                                                />
                                                        </td>
                                                        <td>机动车车上人员责任保险（乘客）
                                                        </td>
                                                        <td>
                                                            <input type="text" class="w40 disabled" id="passengerCount"
                                                                   ng-model="temp[0].itemKindList[4].quantity" ng-value="carInfo.seatCount-1" /> 座*
                                                            <select class="w70" id="passengerPer"  ng-model="temp[0].itemKindList[4].unitAmount" ng-init="temp[0].itemKindList[4].unitAmount='10000'">
                                                                <option value="10000">1万</option>
                                                                <option value="20000">2万</option>
                                                                <option value="50000">5万</option>
                                                                <option value="100000">10万</option>
                                                                <option value="200000">20万</option>
                                                                <option value="250000">25万</option>
                                                                <option value="300000">30万</option>
                                                            </select>
                                                            元/座
                                                            <!-- <input type="text" id="passengerAmount"
                                                                       ng-model="temp[0].itemKindList[4].amount"  ng-value="temp[0].itemKindList[4].quantity*temp[0].itemKindList[4].unitAmount">   元-->
                                                        </td>
                                                        <td class="center"><input type="checkbox"  ng-disabled="!kind[4]"
                                                                                  ng-model="temp[0].itemKindList[4].deductableFlag" ng-true-value="1" ng-false-value="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[4].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[4].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[4].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70"  ng-model="temp[0].itemKindList[4].premium" disabled="disabled"/></td>
                                                    </tr>

                                                    <tr class=" " ng-show="kind[0]=='1'">
                                                        <td><input type="checkbox" value="205" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[5]" ng-click="setDeductable(5)"

                                                                />
                                                        </td>
                                                        <td>机动车划痕损失险</td>
                                                        <td>
                                                            <select  class="w70 disabled" ng-model="temp[0].itemKindList[5].amount" ng-init="temp[0].itemKindList[5].amount='2000'"/>
                                                            <option value="2000">2000</option>
                                                            <option value="5000">5000</option>
                                                            <option value="10000">10000</option>
                                                            <option value="20000">20000</option>
                                                            </select>
                                                        </td>
                                                        <td class="center"><input type="checkbox"   ng-disabled="!kind[5]"
                                                                                  ng-model="temp[0].itemKindList[5].deductableFlag"
                                                                                  ng-true-value="1" ng-false-value="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[5].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[5].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[5].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[5].premium"  disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class=" " ng-show="kind[0]=='1'">
                                                        <td><input type="checkbox" value="205" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[6]"

                                                                />
                                                        </td>
                                                        <td>玻璃单独破碎险
                                                            <select  class="w70 disabled" ng-model="temp[0].itemKindList[6].modeCode" ng-init="temp[0].itemKindList[6].modeCode='1'"/>
                                                            <option value="1">国产玻璃</option>
                                                            <option value="2">进口玻璃</option>
                                                            </select>

                                                        </td>
                                                        <td>

                                                        </td>
                                                        <!--<td class="center"><input type="checkbox" ng-checked="kind[6]" ng-disabled="!kind[6]"-->
                                                        <!--ng-model="temp[0].itemKindList[6].deductableFlag"-->
                                                        <!--ng-true-value="1" ng-false-value="0"/>-->
                                                        <!--</td>-->
                                                        <td></td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[5].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[6].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[6].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[6].premium"  disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class="" ng-show="kind[0]=='1'">
                                                        <td><input type="checkbox" value="202" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[7]" ng-click="setDeductable(7)"

                                                                />
                                                        </td>
                                                        <td>自燃损失险</td>
                                                        <td>元<label class="help-inline">/</label><input type="text"
                                                                                                        class="disabled"
                                                                                                        ng-model="temp[0].itemKindList[7].amount"/>
                                                        </td>
                                                        <td class="center"><input type="checkbox"   ng-disabled="!kind[7]"
                                                                                  ng-model="temp[0].itemKindList[7].deductableFlag"
                                                                                  ng-true-value="1" ng-false-value="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[6].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[7].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"  ng-model="temp[0].itemKindList[7].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70"  ng-model="temp[0].itemKindList[7].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class=" " ng-show="kind[0]=='1'">
                                                        <td><input type="checkbox" value="206" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[8]" ng-click="setDeductable(8)"

                                                                />
                                                        </td>
                                                        <td>发动机涉水损失险</td>
                                                        <td></td>
                                                        <td class="center"><input type="checkbox"   ng-disabled="!kind[8]"
                                                                                  ng-model="temp[0].itemKindList[8].deductableFlag"
                                                                                  ng-true-value="1" ng-false="0"/>
                                                        </td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[7].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[8].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[8].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[8].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    <tr class=" " ng-show="kind[0]=='1'">
                                                        <td><input type="checkbox" value="210" ng-true-value="1"
                                                                   ng-false-value="0" ng-model="kind[9]"  />
                                                        </td>
                                                        <td>机动车损失保险无法找到第三方特约险</td>
                                                        <td></td>
                                                        <td class="center"></td>
                                                        <!-- <td class="center"><input type="text" class="w70"
                                                                                  ng-model="temp[0].itemKindList[8].rateFactor"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"/></td> -->
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[9].benchMarkPremium" disabled="disabled"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[9].discount" disabled="disabled"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[9].premium" disabled="disabled"/></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="h30 bdb_d_888 mb10 mt5">
                                                <div class="f12 fl fwb p5">
		                                <span id="ctrl_isShowOtherInfo"><span class="toggle plus"><i class="upright"></i><i
                                                class="crossband"></i></span>
		                                  <label>
                                              <span>其他附加险</span>
                                          </label>
		                                </span>
                                                </div>
                                            </div>
                                            <div id="addOtherInsInfo" class="form-horizontal hide">
                                                <table class="table table-bordered">
                                                    <thead>
                                                    <tr class="odd gradeX">
                                                        <th>选择</th>
                                                        <th>险别</th>
                                                        <th>保险金额/赔偿限额</th>
                                                        <th>不计免赔</th>
                                                        <th>基准保费</th>
                                                        <th>折扣系数</th>
                                                        <th>保费</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr class="add-temp" ng-hide="!kind[0]"> <!-- hide -->
                                                        <td><input type="checkbox" value="211" ng-model="kind[10]"
                                                                />
                                                        </td>
                                                        <td ng-hide="true"
                                                            ng-bind="mainInfo.combosList[0].itemKindList[10].KindCode"/>
                                                        <td class="text-center">指定修理厂险  车损险浮动系数
                                                            <input type="text" class="w70" id="repairRate" name="repairRate" ng-model="repairRate"/>%
                                                        </td>
                                                        <td></td>
                                                        <!--<td class="text-center"><input type="checkbox"-->
                                                        <!--ng-model="temp[0].itemKindList[10].deductableFlag"/>-->
                                                        <!--</td>-->
                                                        <td></td>
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[10].benchMarkPremium"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[10].discount"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[10].premium"/></td>
                                                    </tr>
                                                    <tr class="add-temp" ng-hide="!kind[0]"> <!-- hide -->
                                                        <td><input type="checkbox" value="203"  ng-model="kind[11]" ng-click="setDeductable(11)"
                                                                />
                                                        </td>
                                                        <td ng-hide="true"
                                                            ng-bind="mainInfo.combosList[0].itemKindList[11].KindCode"/>
                                                        <td>新增加设备损失险</td>
                                                        <td><span ng-model="temp[0].itemKindList[11].amount" ng-bind="calPrice()"></span>元<button type="button" class="btn btn-success mt10 ml5" ng-click="addDevice()" ng-disabled="!kind[11]">新增设备</button>
                                                        </td>
                                                        <td class="center"><input type="checkbox" ng-true-value="1"  ng-false-value="0"
                                                                                  ng-model="temp[0].itemKindList[11].deductableFlag"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[11].benchMarkPremium"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[11].discount"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[11].premium"/></td>
                                                    </tr>
                                                    <tr class="add-tempB" ng-hide="!kind[1]">
                                                        <td><input type="checkbox" value="208"
                                                                   ng-model="kind[12]" ng-click="setDeductable(12)"/>
                                                        </td>
                                                        <td class="text-center">车上货物责任险</td>
                                                        <td><label class="help-inline"> / </label><input type="text"
                                                                                                         ng-model="temp[0].itemKindList[12].amount">
                                                        </td>
                                                        <td class="center"><input type="checkbox" ng-true-value="1"  ng-false-value="0"
                                                                                  ng-model="temp[0].itemKindList[12].deductableFlag"/>
                                                        </td>

                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[12].benchMarkPremium"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[12].discount"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[12].premium"/></td>
                                                    </tr>
                                                    <tr class="add-tempB" ng-hide="!kind[1]" ng-show="kind[3]">
                                                        <td><input type="checkbox" value="215"
                                                                   ng-model="kind[13]" ng-click="setDeductable(13)"/>
                                                        </td>
                                                        <td> 精神损害抚慰金责任险</td>
                                                        <td><input type="text"
                                                                   ng-model="temp[0].itemKindList[13].amount">元
                                                        </td>
                                                        <td class="center"><input type="checkbox" ng-true-value="1" ng-false-value="0"
                                                                                  ng-model="temp[0].itemKindList[13].deductableFlag"/>
                                                        </td>


                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[13].benchMarkPremium"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[13].discount"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[13].premium"/></td>
                                                    </tr>
                                                    <tr class="add-temp" ng-hide="!kind[0]">
                                                        <td><input type="checkbox" value="207"   ng-model="kind[14]"
                                                                />
                                                        </td>
                                                        <td ng-hide="true"
                                                            ng-bind="kind[14]"/>
                                                        <td>修理期间费用补偿险
                                                        </td>
                                                        <td><input type="text" class="w40 disabled"
                                                                   id="repairQuantity"  name="repairQuantity" ng-model="temp[0].itemKindList[14].quantity"/> 天* <input type="text"
                                                                                              class="w70"
                                                                                              value="10000"
                                                                                              id="repairUnitAmount" name="repairUnitAmount" ng-model="temp[0].itemKindList[14].unitAmount"/>  元/天
                                                        </td>
                                                        <td></td>
                                                        <td class="text-center"><input type="text" class="w70"
                                                                                       ng-model="temp[0].itemKindList[14].benchMarkPremium"/>
                                                        </td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[14].discount"/></td>
                                                        <td class="text-center"><input type="text" class="w70" ng-model="temp[0].itemKindList[14].premium"/></td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                    <div id="addPremiumInfo" class="form-horizontal hide">
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">商业险基准保费（合计）：</label>

                                            <div class="controls">
                                                <input type="text" class="w70" ng-model="combosData.sumBenchMarkPremium"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">合计折扣：</label>

                                            <div class="controls">
                                                <input type="text" class="w70" ng-model="combosData.sumDiscountPremium"/>
                                            </div>
                                        </div>
                                        <div class="control-group control-group-inline">
                                            <label class="control-label">商业险保费（合计）：</label>

                                            <div class="controls">
                                                <input type="text" class="w70" ng-model="combosData.sumPremium"/>
                                            </div>
                                        </div>
                                        <div class="control-group w text-center">
                                            <div class="bdb_d_888 mb10 mb5"></div>
                                            <label class="help-inline">总合计保费(含税)：</label>
                                            <strong class="cal-sum w120">{{sumPremium}}</strong>

                                            <div id="status"></div>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <!--特约及争议解决方式
                        <div class="widget-box">
                          <div class="widget-title"> <span class="icon"> <i class="icon-list"></i> </span>
                            <h5>特约及争议解决方式</h5>
                          </div>
                          <div class="widget-content nopadding">
                            <form id="form-wizard" class="form-horizontal" method="post" action="personal-issue.html">
                              <div id="form-wizard-1" class="step">
                                <div class="control-group control-group-inline">
                                  <label class="control-label">争议解决方式：</label>
                                  <div class="controls">
                                    <label class="radio inline">
                                    <input type="radio" name="optionsRadios" id="optionsRadios1" value="2" checked>
                                    诉讼
                                    </label>
                                    <label class="radio inline">
                                    <input type="radio" name="optionsRadios" id="optionsRadios2" value="1">
                                    仲裁
                                    </label>
                                  </div>
                                </div>
                              </div>
                            </form>
                          </div>
                        </div> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- bottom -->
<div>
    <div class="h30">
        <div class="w h30 wrapper-bottom-buttons wrapper-bottom-buttons-bg"></div>
        <div class="w tac wrapper-bottom-buttons fs0">
            <!-- <button class="btn btn-success mt10">保存</button> -->
            <button type="button" ng-click="baojia()" class="btn btn-success mt10 ml5">申请报价</button>
            <a  ng-show="mainInfo.main.demandNo" class="btn btn-success mt10 ml5"  ng-click="generatePDF(mainInfo.main.demandNo)">下载报价单</a>
        </div>
    </div>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/personal-issue.js"></script>
<!-- <script src="js/carModel.js"></script> -->
<!--Picker-->
<script src="js/bootstrap-datetimepicker.js"></script>
<script src="js/bootstrap-datetimepicker.zh-CN.js"></script>
<!-- pikaday -->
<link type="text/css" rel="stylesheet" href="css/pikaday.css"/>
<script type="text/javascript" src="js/pikaday.js"></script>
<script type="text/javascript" src="js/pikaday.jquery.js"></script>
<!-- <script src="js/angular-1.2.9.js"></script> -->
<!--<script src="js/angular-1.2.9.js"></script>-->
<script src="js/angular.min.js"></script>
<!-- <script src="js/angularjs-datetime-picker.js"></script> -->
<!-- <script src="js/ngDialog.js"></script> -->
<script src="js/ui-bootstrap-tpls.js"></script>
<script src="js/plugin/jquery.blockui.js"></script>
<script src="js/common/LoaderMask.js"></script>
<!--<script src="js/fy.js"></script>
<script src="js/config.js"></script>-->
<script src="js/jquery.validate.js"></script>

<script type="text/javascript">

    var app = angular.module('myApp', ['ui.bootstrap']);
    app.directive('orz',function(){
        return function(scope, element, attrs,ngModel) {
            element.datetimepicker({
                minView: "month",
                format: "yyyy-mm-dd",
                language: 'zh-CN',
                autoclose:true,
                onSelect:function (dateText, inst) {
//                console.log(dateText);
                    ngModel.$setViewValue(dateText);

                    scope.$apply();
                }
            });
        }
    })
    app.controller('myController', function ($scope, $http,$modal,$log) {

        $scope.isInputchange = false;
        $scope.personCert = [{Id:'01',name:'身份证'},{Id:'02',name:'护照'},
            {Id:'03',name:'军人证'},{Id:'04',name:'港澳通行证'},
            {Id:'05',name:'驾驶证'},{Id:'06',name:'港澳回乡证或台胞证'},
            {Id:'99',name:'其他'}];
//        $scope.mainInfo.insuredList[1].identifyType='01';
        // 初始化下拉框数据
        $scope.cusRadio = function(e) {
            if (e == 1) {
                $scope.personCert = [{Id:'01',name:'身份证'},{Id:'02',name:'护照'},
                    {Id:'03',name:'军人证'},{Id:'04',name:'港澳通行证'},
                    {Id:'05',name:'驾驶证'},{Id:'06',name:'港澳回乡证或台胞证'},
                    {Id:'99',name:'其他'}];
            } else {
                $scope.personCert = [{Id:'07',name:'组织机构代码证'}];
            }
        };

        //$scope.groupCert =
        //主要信息
        $scope.mainInfo = {
            "insuredList": [{
                "insuredName": "",
                "insuredType": "1",
                "identifyType": "01",
                "identifyNumber": "",
                "mobile": "",
                "sex": "1",
                "email": "",
                "postCode": "",
                "addressName": "",
                "linkerName": "",
                "customerCName": ""
            },{
                "insuredName": "",
                "insuredType": "1",
                "identifyType": "01",
                "identifyNumber": "",
                "mobile": "",
                "sex": "1",
                "email": "",
                "postCode": "",
                "addressName": "",
                "linkerName": "",
                "customerCName": ""
            }]
        };

        // 时间
        /* var bzStartDateChange = function (){
         alert(1);
         var datetime = $("#insuranceDeadline").find("input[name='bzStartDate']").val();
         alert(datetime);
         $scope.mainInfo.main.bzStartDate =datetime;
         }; */

//        $scope.mainInfo.insuredList[1].identifyType='02';
        /**
         * 险别列表，报价模块
         */
        $scope.mainInfo.combosList = [];
//        $scope.mainInfo.combosList[0].itemKindList[0].amount="";
        $scope.mainInfo.combosList[0] = {
            "itemKindList": [{
                "KindCode": "",
                "amount": "",
                "m1Value": "",
                "deductableFlag": "",
                "rateFactor": "",
                "benchMarkPremium": "",
                "premium":""
            }]
        };
//日期
        var d=new Date();
        var year=d.getFullYear();
        var month=d.getMonth()+1;
        if (month<10){
            month="0" + month;
        };
        var day=d.getDate();
        var today=year + "-" + month + "-" + day;

        d.setYear(year+1);
        d.setDate(day-1);
        var nextYear = d.getFullYear();
        var nextMonth=d.getMonth()+1;
        if (nextMonth<10){
            nextMonth="0" + nextMonth;
        };
        var nextDay=d.getDate();
        var nextYearDate=nextYear + "-" + nextMonth + "-" + nextDay;

        $scope.mainInfo.main={
            "startDate":today,
            "endDate":nextYearDate,
            "bzStartDate":today,
            "bzEndDate":nextYearDate
        }
        //标记是否选中对应险种
        $scope.kind = [];

        $scope.carDeviceList=[
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""}
            ]


        $scope.temp = [];
        $scope.temp[0] = {
            "itemKindList": [{
                "kindCode": "",
                "amount": "",
                "m1Value": "",
                "deductableFlag": "",
                "rateFactor": ""


            }]
        };
        $scope.temp[1] = {
            "itemKindList": [{
                "kindCode": "",
                "amount": "",
                "m1Value": "",
                "deductableFlag": "",
                "rateFactor": ""


            }]
        };
//返回险种信息
        $scope.combosData={};

        //基本险种
        $scope.temp[0].itemKindList = [
            {"kindCode": "001", "kindName": "机动车损失保险", "deductableFlag": "0"},
            {"kindCode": "002", "kindName": "机动车第三者责任保险", "deductableFlag": "0"},
            {"kindCode": "007", "kindName": "机动车全车盗抢保险", "deductableFlag": "0"},
            {"kindCode": "003", "kindName": "机动车车上人员责任保险（司机）", "deductableFlag": "0"},
            {"kindCode": "006", "kindName": "机动车车上人员责任保险（乘客）", "deductableFlag": "0"},
            {"kindCode": "205", "kindName": "机动车划痕损失险", "deductableFlag": "0"},
            {"kindCode": "201", "kindName": "玻璃单独破碎险", "deductableFlag": "0"},
            {"kindCode": "202", "kindName": "自燃损失险", "deductableFlag": "0"},
            {"kindCode": "206", "kindName": "发动机涉水损失险", "deductableFlag": "0"},
            {"kindCode": "210", "kindName": "机动车损失保险无法找到第三方特约险", "deductableFlag": "0"},
            {"kindCode": "211", "kindName": "指定修理厂险", "deductableFlag": "0"},
            {"kindCode": "203", "kindName": "新增设备损失保险", "deductableFlag": "0"},
            {"kindCode": "208", "kindName": "车上货物责任险", "deductableFlag": "0"},
            {"kindCode": "215", "kindName": "精神损害抚慰金责任险", "deductableFlag": "0"},
            {"kindCode": "207", "kindName": "修理期间费用补偿险", "deductableFlag": "0"}

        ];


        //不计免赔险种
        $scope.temp[1].itemKindList = [
            {"kindCode": "301", "kindName": "不计免赔率险（机动车损失保险）", "deductableFlag": "0"},
            {"kindCode": "302", "kindName": "不计免赔率险（第三者责任保险）", "deductableFlag": "0"},
            {"kindCode": "306", "kindName": "不计免赔率险（全车盗抢保险）", "deductableFlag": "0"},
            {"kindCode": "303", "kindName": "不计免赔率险（机动车车上人员责任保险（司机））", "deductableFlag": "0"},
            {"kindCode": "305", "kindName": "不计免赔率险（机动车车上人员责任保险（乘客））", "deductableFlag": "0"},
            {"kindCode": "309", "kindName": "不计免赔率险（车身划痕损失险）", "deductableFlag": "0"},
            null,
            {"kindCode": "307", "kindName": "不计免赔率险（自燃损失险）", "deductableFlag": "0"},
            {"kindCode": "310", "kindName": "不计免赔率险（发动机涉水损失险）", "deductableFlag": "0"},
            null,
            null,
            {"kindCode": "308", "kindName": "不计免赔率险（新增设备损失保险）", "deductableFlag": "0"},
            {"kindCode": "311", "kindName": "不计免赔率险（车上货物责任险）", "deductableFlag": "0"},
            {"kindCode": "315", "kindName": "不计免赔率险（精神损害抚慰金责任险）", "deductableFlag": "0"},
            null
        ];

//       alert(JSON.stringify(all));

        $scope.mainInfo.carInfo = {
            "newCarFlag": "0",
            "carPriceType":"1"
        };



        $scope.selected = [];
        $scope.checkVal = function (){
            if($scope.quicklyQuery.$invalid) {
                //sys.alert('未录入检索条件');
                swal("","未录入检索条件","warning");
                return false;
            }
            return true;
        };
//        设置不计免赔
        $scope.setDeductable=function(i){
            if($scope.kind[i]==1){
                $scope.temp[0].itemKindList[i].deductableFlag=1;
            }
            if($scope.kind[i]==0){
                $scope.temp[0].itemKindList[i].deductableFlag=0;
            }
        }
//        新增设备
        $scope.addDevice=function(){

            var modalInstance = $modal.open({
                templateUrl : 'addDevice.html',  //指向上面创建的视图
                controller : 'ModalDeviceCtrl',// 初始化模态范围
                size : 16, //大小配置
                resolve : {
                    carDeviceList : function(){
                        return $scope.carDeviceList;
                    }
                }
            });
            modalInstance.result.then(function(selectedItem) {
                $scope.carDeviceList = selectedItem;
            }, function() {
                $log.info('Modal dismissed at: ' + new Date());
            });

        }
        //历史数据复用
        $scope.query = function(size){
            if(!$scope.checkVal()){
                return;
            } else {
                if(!quicklyQueryValidate.form()) {
                    return;
                }
            }
//             alert(JSON.stringify($scope.licenseNo));
            var quickInfo=JSON.stringify($scope.quick);

            $http.post('car/getCarPolicyInfo/02',quickInfo)
                    .success(function(data,status){
//                          alert(status);
                        $scope.items = data;
                        //打开模态
                        var modalInstance = $modal.open({
                            templateUrl : 'myModelContent.html',  //指向上面创建的视图
                            controller : 'ModalInstanceCtrl',// 初始化模态范围
                            size : size, //大小配置
                            resolve : {
                                items : function(){
                                    return $scope.items;
                                }
                            }
                        })
                        modalInstance.result.then(function(selectedItem){
                            $scope.selected = selectedItem;


                            $scope.policy={};
//                                根据选中的保单险种类别设置不同的字段值
                            if(JSON.stringify($scope.selected.riskCode)=='0507'){

                            }
                            else{
                                $scope.policy={
                                    "policyNo":$scope.selected.policyNo,
                                    "startDate":$scope.selected.startDate,
                                    "endDate":$scope.selected.endDate,
                                    "relationFlag":"2",
                                    "TmkFlag":"1"
                                };
                            }
                            $.LoaderMask.loading({title:"加载中...",isFlag:true});

                            $http.post('car/policyReuse/03',$scope.policy)
                                    .success(function(data,status){

//                                         设置投保人信息
                                        $scope.mainInfo.applicant=data.applicantEhm;
//                                         设置车辆信息
                                        $scope.mainInfo.carInfo=data.carInfoEhm;
                                        $scope.carInfoList=[
                                            {
                                                "platModelCode":data.carInfoEhm.platmodelcode,
                                                "platModelName":data.carInfoEhm.platmodelname,
                                                "rBCode":data.carInfoEhm.rbCode,
                                                "marketDate":data.carInfoEhm.marketDate,
                                                "purchasePrice":data.carInfoEhm.purchasePrice,
                                                "actualValue":data.carInfoEhm.actualValue,
                                                "seatCount":data.carInfoEhm.seatCount,
                                                "vehicleTonnage":data.carInfoEhm.tonCount,
                                                "vehicleWeight":data.carInfoEhm.completeKerbMass,
                                                "exhaustCapacity":data.carInfoEhm.exhaustScale
                                            }
                                        ]
                                        $scope.carInfo= $scope.carInfoList[0];
//                                         $scope.carInfo={
//                                             "platModelCode":data.carInfoEhm.platmodelcode,
//                                             "platModelName":data.carInfoEhm.platmodelname,
//                                             "rBCode":data.carInfoEhm.rbCode,
//                                             "marketDate":data.carInfoEhm.marketDate,
//                                             "purchasePrice":data.carInfoEhm.purchasePrice
//                                         }
//                                         设置主信息
                                        $scope.mainInfo.main=data.mainEhm;
//                                         设置被保险人和车主信息
                                        var insuredArr=data.insuredDataEhmArr;
                                        if(insuredArr[0].insuredFlag=='5'){
                                            $scope.mainInfo.insuredList[0]=insuredArr[0];
                                            $scope.mainInfo.insuredList[0].insuredType=insuredArr[0].insuredNature;
                                            $scope.mainInfo.insuredList[1]=insuredArr[1];
                                        }
                                        else{
                                            $scope.mainInfo.insuredList[0]=insuredArr[1];
                                            $scope.mainInfo.insuredList[1]=insuredArr[0];
                                            $scope.mainInfo.insuredList[0].insuredType=insuredArr[1].insuredNature;
                                        }
                                        var itemKindDataEhmArr=data.itemKindDataEhmArr;
//                                         $scope.combosData.sumPremium= data.mainEhm.sumPremium;
                                        var all=$scope.temp[0].itemKindList;
                                        for(var i=0;i<itemKindDataEhmArr.length;i++){
                                            var itemKind=itemKindDataEhmArr[i];
                                            for(var j=0;j<all.length;j++){
                                                if(itemKind.kindCode==all[j].kindCode){
                                                    $scope.kind[j]=1;
                                                    if(itemKind.deductableFlag=='1'){
                                                        all[j].deductableFlag=1;
                                                    }
//                                                     all[j].premium=itemKind.premium;
//                                                     all[j].benchMarkPremium=itemKind.benchMarkPremium;
//                                                     all[j].discount=itemKind.discount;
//                                                     break;
                                                }

                                            }
                                        }
                                        $.LoaderMask.loading({title:"加载中...",isFlag:false});
                                    })
                                    .error(function(data,status){
                                        $.LoaderMask.loading({title:"加载中...",isFlag:false});
                                        //sys.error("系统出错，请联系系统管理员");
                                        // alert("系统出错，请联系系统管理员");
                                        swal("系统提示","系统出错，请联系系统管理员","error");
//                                         alert(status);
                                    })


                        },function(){

                            $log.info('Modal dismissed at: ' + new Date())
                        })
                    })
                    .error(function(data,status){
                        //sys.error("系统出错，请联系系统管理员");
                        // alert("系统出错，请联系系统管理员");
                        swal("系统提示","系统出错，请联系系统管理员","error");
                    });

//            $scope.items = ['8050120164039900001','8050120164039900001','8050120164039900001'];

        };
        //车损险的参考实际价值等于平台返回的车辆实际价值
        $scope.changeAmount = function () {
            if($scope.mainInfo.carInfo.carPriceType==2){
                $scope.temp[0].itemKindList[0].amount=$scope.mainInfo.carInfo.fairMarketValue;
                $scope.temp[0].itemKindList[2].amount=$scope.mainInfo.carInfo.fairMarketValue;
            }
            if($scope.mainInfo.carInfo.carPriceType==1){
                $scope.temp[0].itemKindList[0].amount=$scope.carInfo.actualValue;
                $scope.temp[0].itemKindList[2].amount=$scope.carInfo.actualValue;
            }

        };

        /*        $scope.change=function(carInfo){

         $scope.temp[0].itemKindList[0].amount = carInfo.actualValue;
         $scope.temp[0].itemKindList[2].amount=carInfo.actualValue;

         }; */
        $scope.myclick = function(){
//            alert($scope.temp[0].itemKindList[4].amount);
        }

//        监听商业险和交强险日期变化
        $scope.$watch("mainInfo.main.startDate", function(newValue, oldValue) {
            if(newValue!=null){
                var date=new Date(newValue);
                date.setYear(date.getFullYear()+1);
                date.setDate(date.getDate()-1);
                var year=date.getFullYear();
                var month=date.getMonth()+1;
                if (month<10){
                    month="0" + month;
                };
                var day=date.getDate();
                var nextDate=year + "-" + month + "-" + day;
                $scope.mainInfo.main.endDate=nextDate;
            }


        });
        $scope.$watch("mainInfo.main.bzStartDate", function(newValue, oldValue) {
            if(newValue!=null){
                var date=new Date(newValue);
                date.setYear(date.getFullYear()+1);
                date.setDate(date.getDate()-1);
                var year=date.getFullYear();
                var month=date.getMonth()+1;
                if (month<10){
                    month="0" + month;
                };
                var day=date.getDate();
                var nextDate=year + "-" + month + "-" + day;
                $scope.mainInfo.main.bzEndDate=nextDate;
            }

        });
        //监听车辆实际价值 carInfo.actualValue
        $scope.$watch("carInfo.actualValue",function(newValue, oldValue){
            if(!($scope.carInfo===undefined)){
                $scope.temp[0].itemKindList[0].amount =$scope.carInfo.actualValue;

            }
        })
//        监听参考实际价值
        $scope.$watch("temp[0].itemKindList[0].amount",function(newValue, oldValue){
            if(!($scope.temp[0].itemKindList[0].amount===undefined)){
                $scope.temp[0].itemKindList[2].amount=$scope.temp[0].itemKindList[0].amount;
                $scope.temp[0].itemKindList[7].amount=$scope.temp[0].itemKindList[0].amount;
            }
        })
//        计算新增设备保额
        $scope.calPrice = function () {
            $scope.temp[0].itemKindList[11].amount=0;

            for(var i=0;i<$scope.carDeviceList.length;i++){
                if($scope.carDeviceList[i].actualValue!=""||$scope.carDeviceList[i].actualValue!=null){
                    $scope.temp[0].itemKindList[11].amount=$scope.carDeviceList[i].actualValue+$scope.temp[0].itemKindList[11].amount;
                }
            }
            return $scope.temp[0].itemKindList[11].amount;
        };
//        被保险人查询
        $scope.insuredQuery = function () {
//            $scope.mainInfo.insuredList[0].customerCName=$scope.mainInfo.insuredList[0].insuredName;
//            $scope.mainInfo.insuredList[0].customerType=$scope.mainInfo.insuredList[0].insuredType;
            var customerInfo = {
                "customerCName": $scope.mainInfo.insuredList[1].insuredName,
                "customerType": $scope.mainInfo.insuredList[1].insuredType,
                "identifyType": $scope.mainInfo.insuredList[1].identifyType,
                "identifyNumber": $scope.mainInfo.insuredList[1].identifyNumber,
                "idvSex": $scope.mainInfo.insuredList[1].sex
            }
//            alert(JSON.stringify(customerInfo));
//           var datas= JSON.stringify($scope.mainInfo.insuredList[0]);
//           /car/getCustomerInfo/{id}
            $http.post('car/getCustomerInfo/07', customerInfo)
                    .success(function (data, status) {

                        var customerInfo = data;
                        $scope.mainInfo.insuredList[1] = {
                            "insuredName": customerInfo.customerCName,
                            "insuredType": customerInfo.customerType,
                            "identifyType": customerInfo.identifyType,
                            "identifyNumber": customerInfo.identifyNumber,
                            "sex": customerInfo.sex,
                            "insuredCode": customerInfo.customerCode,
                            "mobile":customerInfo.mobile,
                            "birthDay":customerInfo.birthDate,
                            "insuredType":"1"
                        }



                    })
                    .error(function (data, status) {

//                        alert(status);
//                        alert(data);
                    });

        };
        // 检查是否输入
        $scope.checkSaveAndQuotePara = function ($scope){
            var autoScope = $scope;
            if(!autoScope.insuredForm.$valid) {
                //sys.alert('被保人信息校验不通过');
                swal("系统提示","被保人信息校验不通过","warning");
                return false;
            }
            if(!autoScope.ownerForm.$valid) {
                //sys.alert('行驶证车主信息校验不通过');
                swal("系统提示","行驶证车主信息校验不通过","warning");
                return false;
            }
            if(!autoScope.insuranceDeadline.$valid) {
                //sys.alert('保险期限信息校验不通过');
                swal("系统提示","保险期限信息校验不通过","warning");
                return false;
            }
            if(!autoScope.carForm.$valid) {
                //sys.alert('行车辆信息校验不通过');
                swal("系统提示","车辆信息校验不通过","warning");
                return false;
            }
            if(autoScope.jqx==0 && !autoScope.checkProtection.$valid) {
                //sys.alert('交强险信息校验不通过');
                swal("系统提示","交强险信息校验不通过","warning");
                return false;
            }
            if(autoScope.syx==0 && !autoScope.checkProtection.$valid) {
                //sys.alert('商业险信息校验不通过');
                swal("系统提示","商业险信息校验不通过","warning");
                return false;
            }
            return true;
        };
        //保费计算
        $scope.baojia = function () {
            if(!$scope.checkSaveAndQuotePara($scope)) {
                return;
            }
            $.LoaderMask.loading({title:"保费计算中...",isFlag:true});
            $scope.selected = [];
            //设置商业险交强险日期
            /*  $sope.mainInfo.main={
             "bzStartDate":function(){return $("#bzStartDate").val()},
             "bzEndDate":function(){return $("#bzEndDate").val()},
             "startDate":function(){return $("#startDate").val()},
             "endDate":function(){return $("#endDate").val()}
             } */
            $scope.mainInfo.combosList[0] = {
                "itemKindList": [{
                    "kindCode": "",
                    "amount": "",
                    "m1Value": "",
                    "deductableFlag": "",
                    "rateFactor": "",
                    "benchMarkPremium": ""

                }]
            };
            //存储商业险险别列表
            //处理商业险险别列表
            $scope.temp[0].itemKindList[4].quantity=$scope.carInfo.seatCount-1;
            $scope.temp[0].itemKindList[4].amount=$scope.temp[0].itemKindList[4].quantity*$scope.temp[0].itemKindList[4].unitAmount;
            $scope.temp[0].itemKindList[10].rate=$scope.repairRate/100;
            for(var flag = 0;flag<$scope.temp[0].itemKindList.length;flag=flag+1){
                if($scope.kind[flag]=="1"){
                    $scope.selected.push($scope.temp[0].itemKindList[flag]);
                    if($scope.temp[0].itemKindList[flag].deductableFlag=="1"){
                        $scope.temp[1].itemKindList[flag].amount="0";
                        $scope.selected.push($scope.temp[1].itemKindList[flag]);
                    }

                }
            }
//            $scope.mainInfo.combosList[0].itemKindList = $scope.selected;
//            设置被保险人 车主 信息
            $scope.mainInfo.insuredList[0].insuredNature="carOwner";
            if($scope.mainInfo.insuredList[1].insuredType=="1"){
                $scope.mainInfo.insuredList[1].insuredNature="3";
            }
            if($scope.mainInfo.insuredList[1].insuredType=="2"){
                $scope.mainInfo.insuredList[1].insuredNature="4";
            }

//            设置险种信息
            $scope.mainInfo.combosList[0].itemKindList = $scope.selected;

//            设置交强险信息
            if($scope.jqx=='1'){
//                设置交强险主信息
                $scope.mainInfo.combosList[1]={
                    "combosCode":"PACK000000",
                    "serialNo":"0",
                    "riskCode":"0507",
                    "comboNature":"3",
                    "itemKindList":[
                        {"riskcode":"0507","kindCode":"BZ","deductableFlag":"0",}

                    ]

                }
//                设置车船税信息
                $scope.mainInfo.carShipTaxInfo.taxFlag=$scope.carShipTaxInfo.taxFlag;
                $scope.mainInfo.carShipTaxInfo.taxPayerName=$scope.mainInfo.insuredList[1].insuredName;
                $scope.mainInfo.carShipTaxInfo.taxPayerCertiCode=$scope.mainInfo.insuredList[1].identifyNumber;
//                $scope.carShipTaxInfo={
//                    "taxFlag":"3M",
//                    "taxPayerName":"田伟",
//                    "taxPayerCertiType":"01",
//                    "taxPayerCertiCode":"420683198809066118",
//                    "relifReason":"M7",
//                    "deductionDueType":"E",
//                    "kTaxComCode":"2440304",
//                    "kTaxComName":"深圳市福田区地税局",
//                    "freeNo":"440300255489"
//                }

            }
            if($scope.jqx=='0'){
                $scope.mainInfo.combosList=[ $scope.mainInfo.combosList[0]];
            }

            var selectedArray=JSON.stringify($scope.selected);
//            将车型查询返回值绑定到车辆请求信息上
            $scope.mainInfo.carInfo.completeKerbMass = $scope.carInfo.vehicleWeight;
            $scope.mainInfo.carInfo.tonCount = $scope.carInfo.vehicleTonnage;
            $scope.mainInfo.carInfo.exhaustScale = $scope.carInfo.exhaustCapacity;
            $scope.mainInfo.carInfo.purchasePrice = $scope.carInfo.purchasePrice;
            $scope.mainInfo.carInfo.actualValue = $scope.carInfo.actualValue;
            $scope.mainInfo.carInfo.rbCode = $scope.carInfo.rBCode;
            $scope.mainInfo.carInfo.platmodelCode = $scope.carInfo.platModelCode;
            $scope.mainInfo.carInfo.platmodelname = $scope.carInfo.platModelName;
            $scope.mainInfo.carInfo.importFlag = $scope.carInfo.importFlag;
            $scope.mainInfo.carInfo.seatCount = $scope.carInfo.seatCount;

//            设置车辆车主信息
            $scope.mainInfo.carInfo.carOwner=$scope.mainInfo.insuredList[0].insuredName;
            $scope.mainInfo.carInfo.carOwnerNature=$scope.mainInfo.insuredList[0].insuredType;
            $scope.mainInfo.carInfo.carOwnerIdentifyType=$scope.mainInfo.insuredList[0].identifyType;
            $scope.mainInfo.carInfo.carOwnerIdentifyNumber=$scope.mainInfo.insuredList[0].identifyNumber;

//            var ss = JSON.stringify($scope.mainInfo.combosList[0].itemKindList);

//设置投保人信息
            $scope.mainInfo.applicant = {
                "insuredNature":$scope.mainInfo.insuredList[1].insuredNature,
                "insuredType": $scope.mainInfo.insuredList[1].insuredType,
                "identifyType": $scope.mainInfo.insuredList[1].identifyType,
                "identifyNumber": $scope.mainInfo.insuredList[1].identifyNumber,
                "appliName":  $scope.mainInfo.insuredList[1].insuredName
            };
//            设置新增设备信息
            if($scope.kind[11]==1){
                $scope.mainInfo.carDeviceList=$scope.carDeviceList;
            }
            var info = JSON.stringify($scope.mainInfo);
            $http.post('car/premiumCalculate/06', info)
                    .success(function (data, status) {
//                        $scope.mainInfo = data;
                        $scope.mainInfo.main=data.main;
                        $scope.mainInfo.main.proposalNo=data.main.sSproposalNo;
                        $scope.combosData=data.combosList[0];
                        var selected= $scope.selected;
                        var itemKindList=$scope.combosData.itemKindList;

                        for(var i=0;i<itemKindList.length;i++){
                            var itemKind=itemKindList[i];
                            for(var j=0;j<selected.length;j++){
                                if(selected[j].kindCode==itemKind.kindCode){
                                    selected[j].benchMarkPremium=itemKind.benchMarkPremium;
                                    selected[j].premium=itemKind.premium;
                                    selected[j].discount=itemKind.discount;
                                }
                            }
                        }
//                        设置车船税
//                        $scope.carShipTaxInfo=data.carShipTaxInfo;
//                    展示交强险信息
//                       //                   设置总保费
                        $scope.sumPremium=$scope.combosData.sumPremium;
                        if(data.combosList.length==2){
                            //                        设置车船税
                            $scope.mainInfo.carShipTaxInfo=data.carShipTaxInfo;
                            $scope.combosJQX=data.combosList[1];
                            if(!($scope.combosJQX.sumPremium===undefined)){
                                $scope.sumPremium=parseFloat($scope.sumPremium)+parseFloat($scope.combosJQX.sumPremium);
                            }
                            if(!($scope.mainInfo.carShipTaxInfo.sumPayTax===undefined)){
                                $scope.sumPremium=parseFloat($scope.sumPremium)+parseFloat($scope.mainInfo.carShipTaxInfo.sumPayTax);
                            }
                        }

                        //sys.ok("保费计算成功");	
                        //alert("保费计算成功");

                        $.LoaderMask.loading({title:"保费计算中...",isFlag:false});
//                        sweetAlert("保费计算成功");
                        swal("保费计算成功");

                    })
                    .error(function (data, status) {
                        $.LoaderMask.loading({title:"保费计算中...",isFlag:false});
//                        alert(status);
//                        alert(JSON.stringify(data.errorMessage))
                        //sys.error(JSON.stringify(data.errorMessage));
                        swal(JSON.stringify(data.errorMessage));

                    });

        };


//        是否同被保险人
        $scope.isSample = function (toInsured) {

            if (toInsured == "1") {
                $scope.mainInfo.carInfo.carInsureRelation="1";
                $scope.mainInfo.insuredList[0] = {
                    "insuredName": $scope.mainInfo.insuredList[1].insuredName,
//                    "insuredType": $scope.mainInfo.insuredList[1].insuredType,
                    "identifyType": $scope.mainInfo.insuredList[1].identifyType,
                    "identifyNumber": $scope.mainInfo.insuredList[1].identifyNumber,

                };
                if($scope.mainInfo.insuredList[1].insuredType=="1"){

                    $scope.mainInfo.insuredList[0].insuredType="7";
                }
            }
            else {
                $scope.mainInfo.insuredList[0] = {};
            }
        };
//        车型查询
        $scope.getVehicleModelQuery = function () {
            if(!vehicleModelQuery1.form()) {
                return ;
            }
            if(!vehicleModelQuery2.form()) {
                return ;
            }
            //
            $.LoaderMask.loading({title:"车型查询中...",isFlag:true});
            var carInfo={
                "busiStartDate":$scope.mainInfo.main.startDate,
                "carKindCode":$scope.mainInfo.carInfo.carKindCode,
                "newVehicleFlag":$scope.mainInfo.carInfo.newCarFlag,
                "brandName":$scope.mainInfo.carInfo.brandName,
                "useNatureCode":$scope.mainInfo.carInfo.useNatureCode,
                "enrollDate":$scope.mainInfo.carInfo.enrollDate

            };
            $http.post('car/getVehicleModelList/04', carInfo)
                    .success(function (data, status,header,config) {
                        $scope.carInfoList = data;

//                        alert(JSON.stringify($scope.carInfoList));
                        $.LoaderMask.loading({title:"车型查询中...",isFlag:false});

                    })
                    .error(function (data, status,header,config) {
                        $.LoaderMask.loading({title:"车型查询中...",isFlag:false});
//                        alert("车型查询失败，请明确车型名称")
//                        sweetAlert("车型查询失败，请明确车型名称");
                        // sys.error("车型查询失败，请明确车型名称");
                        //alert("车型查询失败，请明确车型名称");
                        swal("系统提示","车型查询失败，请明确车型名称","error");
//                         alert(header);
//                        alert(status);
                    });
        };

//test
        $scope.download=function(){
            $http({method:'GET', url:'/download/'+image[0]['_id']}).
                    success(function(data, status, headers, config) {
                        var element = angular.element('<a/>');
                        element.attr({
                            href: 'data:attachment/tif;charset=utf-8,' + encodeURI(data),
                            target: '_self',
                            download:'test.tif'
                        })[0].click();
                    }).
                    error(function(data, status, headers, config) {
                    });
        }

        //    生成pdf
        $scope.generatePDF=function(demandNo){
            var url='car/generatePDF/'+''+demandNo+'/08';
            //alert(url);
            $http.post(url,$scope.mainInfo)
                    .success(function(data,status){
                        var element = angular.element('<a/>');
                        element.attr({
                            href:'./download/'+demandNo,
                            target: '_self',
                            download:demandNo+'.pdf'
                        })[0].click();
                    })
                    .error(function(data,status){
                        //alert(error);
                    })
        }

    });



    angular.module('myApp').controller('ModalInstanceCtrl',function($scope,$modalInstance,items){ //依赖于modalInstance
        $scope.items = items;
        $scope.selected={};
//        $scope.selected = {
//            item : $scope.items[0]
//        };
        $scope.ok = function(){
            $modalInstance.close($scope.selected); //关闭并返回当前选项

        };
        $scope.cancel = function(){
            $modalInstance.dismiss('cancel'); // 退出
        }
    });

    angular.module('myApp').controller('ModalDeviceCtrl',function($scope,$modalInstance,carDeviceList){ //依赖于modalInstance
        $scope.carDeviceList = carDeviceList;
        $scope.selected={};
//        $scope.selected = {
//            item : $scope.items[0]
//        };
        $scope.grandTotal = function (carDeviceList) {
              var totalamount=0;
            for(var i=0;i<carDeviceList.length;i++){
                if(carDeviceList[i].actualValue!=""||carDeviceList[i].actualValue!=null){
                    totalamount=carDeviceList[i].actualValue+totalamount;
                }
            }
            return totalamount;
        };
        $scope.add = function(){
//            $modalInstance.close($scope.selected); //关闭并返回当前选项
            var device={
                "deviceName":"",
                "actualValue;":""
            }
            $scope.carDeviceList.push(device);

        };
        $scope.confirm = function(){
            var newCarDeviceList=[];
            for(var i=0;i<$scope.carDeviceList.length;i++){
                if($scope.carDeviceList[i].deviceName!=""&&$scope.carDeviceList[i].actualValue!=""){
                    newCarDeviceList.push($scope.carDeviceList[i]);
                }
            }
            $modalInstance.close(newCarDeviceList); //关闭并返回当前选项

        };
//        resert
        $scope.resert = function(){
            $scope.carDeviceList=[
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""},
                {"deviceName":"","actualValue":""}
            ]

        };
        $scope.cancel = function(){
            $modalInstance.dismiss('cancel'); // 退出
        }
    });

    // 表单验证
    var quicklyQueryValidate = $("form[name='quicklyQuery']").validate({
        rules:{
            licenseNo:{
                required:true,
                minlength: 6,
                maxlength: 11,

            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
        	$( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            licenseNo: {required: "车牌号不能为空！",
                minlength: "车牌号不能小于6位！",
                maxlength: "车牌号不能超过12位！"}
        }
    });
    //    车辆公允价值验证
    /* var fairMarketValueValidate = $("form[name='carForm']").validate({
        rules:{
            fairMarketValue:{

                min:function() {
                    return parseFloat($('#actualValue').val())*0.7;
                },
                max:function() {
                    return parseFloat($('#actualValue').val())*1.3;
                }

            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
        	$( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            fairMarketValue: {
                min: "市场公允价值必须大于{0}！",
                max: "市场公允价值必须小于{0}！"}
        }
    }); */
    //    浮动系数 checkProtection  repairRate

    var fairMarketValueValidate = $("form[name='checkProtection']").validate({
        rules:{
            repairRate:{

                min:10,
                max:30
            },
            repairQuantity:{
                min:0,
                max:90
            },
            repairUnitAmount:{
                min:0,
                max:300
            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
	        $( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            repairRate: {
                min: "浮动系数必须大于{0}！",
                max: "浮动系数必须小于{0}！"},
            repairQuantity: {
                min: "天数必须大于{0}！",
                max: "天数必须小于{0}！"},
            repairUnitAmount: {
                min: "金额必须大于{0}！",
                max: "金额必须小于{0}！"}
        }
    });
    var insuredFormValidate = $("form[name='insuredForm']").validate({
        rules:{
            insuredName:{
                required:true
            },
            idCard:{
                required:true
            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
	        $( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            insuredName: {required: "名称不能为空！"},
            idCard: {required: "证件号不能为空！"}
        }
    });

    var ownerFormValidate = $("form[name='ownerForm']").validate({
        rules:{
            username:{
                required:true
            },
            idCard:{
                required:true
            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
	        $( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            username: {required: "名称不能为空！"},
            idCard: {required: "证件号不能为空！"}
        }
    });

    var vehicleModelQuery1 = $("form[name='insuranceDeadline']").validate({
        rules:{
            startDate:{
                required:true
            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
	        $( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            startDate: {required: "商业险保险期限不能为空！"}
        }
    });
    

    var vehicleModelQuery2 = $("form[name='carForm']").validate({
        rules:{
           carKindCode:{
                required:true
            },
            useNatureCode:{
                required:true
            }, 
            enrollDate:{
                required:true
            },
            carModel:{
                required:true
            }
        },
        errorClass: "help-inline",  //help-block
        errorElement: "span",
        highlight:function(element, errorClass, validClass) {
	        $( element ).tooltip({ placement: 'bottom' });
        	$( element ).css({'background-color': '#FFED86','border-color':'rgba(236, 168, 82, 0.8)'});
        },
        unhighlight: function(element, errorClass, validClass) {
        	$( element ).css({'background-color': '','border-color':''});
        },
        messages: {
            carKindCode: {required: "车辆种类不能为空！"},
            useNatureCode: {required: "使用性质不能为空！"}, 
            enrollDate: {required: "初次登记日期不能为空！"},
            carModel: {required: "厂牌型号不能为空！"}
        }
    });


</script>
</body>
</html>
